"use strict";System.register(["Languages/LocalizationHelper.js"],function(n){function f(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var i,r,t,u;return{setters:[function(n){i=n.Localization}],execute:function(){r=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();t=void 0;n("UsersWindow",u=function(){function n(){f(this,n)}return r(n,[{key:"getModalInstance",value:function(){return t}},{key:"load",value:function(){var n=new i;$(document).ready(function(){var u=$("body"),f=abp.services.app.user,i=$("#UserCreateModal"),r=i.find("form");r.validate();r.find('button[type="submit"]').click(function(n){if(n.preventDefault(),r.valid()){var t=r.serializeFormToObject();abp.ui.setBusy(i);f.createUser(t).done(function(){i.modal("hide");o()}).always(function(){abp.ui.clearBusy(i)})}});i.on("shown.bs.modal",function(){i.find("input:not([type=hidden]):first").focus()});var s=function(t){abp.message.confirm(n.localize("DeleteUser"),function(i){i&&(abp.ui.setBusy(),f.deleteUser(t).then(function(){abp.notify.warn(n.localize("Deleted"));o();abp.ui.clearBusy()}).always(function(){abp.ui.clearBusy()}))})},e=void 0,o=function(){e&&e.destroy();abp.ui.setBusy();f.getUsers({getAll:!0}).done(function(n){abp.ui.clearBusy();var t=n.users,i=[{targets:0,render:function(n,t,i){var r='<a class="btn btn-primary btn-xs js-edit-user" data-id="'+i.id+'"><i data-id="'+i.id+'" class="fa fa-edit"><\/i><\/a>',u='<a class="btn btn-danger btn-xs js-delete-user" data-id="'+i.id+'"><i data-id="'+i.id+'" class="fa fa-times"><\/i><\/a>',f='<a class="btn btn-primary btn-xs js-permission-user" data-id="'+i.id+'"><i data-id="'+i.id+'" class="fa fa-lock"><\/i><\/a>';return r+" "+f+" "+u}}];e=$("#users-table").DataTable({data:t,columns:[{title:"",data:"id"},{title:"Full Name",data:"fullName"},{title:"Username",data:"userName"}],columnDefs:i})}).always(function(){abp.ui.clearBusy()})},h=function(n){var t=$(n.target).data("id");s(t)},c=function(n){var t=$(n.target).data("id")},l=function(i){var r=$(i.target).data("id");t=$("#modal");t.load("/AdminMpa/Users/EditUser/"+r,function(){t.modal()});t.on("hidden.bs.modal",function(){abp.notify.warn(n.localize("ModalClosed"))})};u.on("click",".js-delete-user",h);u.on("click",".js-permission-user",c);u.on("click",".js-edit-user",l);o()})}}]),n}());n("UsersWindow",u)}}});