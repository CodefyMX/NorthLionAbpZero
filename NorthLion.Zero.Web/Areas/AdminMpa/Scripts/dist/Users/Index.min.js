"use strict";System.register(["Languages/LocalizationHelper.js"],function(n){function f(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}var t,i,r,u;return{setters:[function(n){t=n.Localization}],execute:function(){i=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}();r=void 0;n("UsersWindow",u=function(){function n(){f(this,n)}return i(n,[{key:"getModalInstance",value:function(){return r}},{key:"load",value:function(){var n=new t;$(document).ready(function(){var i=$("body"),u=abp.services.app.user,t=$("#UserCreateModal"),r=t.find("form");r.validate();r.find('button[type="submit"]').click(function(n){if(n.preventDefault(),r.valid()){var i=r.serializeFormToObject();abp.ui.setBusy(t);u.createUser(i).done(function(){t.modal("hide");e()}).always(function(){abp.ui.clearBusy(t)})}});t.on("shown.bs.modal",function(){t.find("input:not([type=hidden]):first").focus()});var o=function(t){abp.message.confirm(n.localize("DeleteUser"),function(i){i&&(abp.ui.setBusy(),u.deleteUser(t).then(function(){abp.notify.warn(n.localize("Deleted"));e();abp.ui.clearBusy()}).always(function(){abp.ui.clearBusy()}))})},f=void 0,e=function(){f&&f.destroy();abp.ui.setBusy();u.getUsers({getAll:!0}).done(function(n){abp.ui.clearBusy();var t=n.users,i=[{targets:0,render:function(n,t,i){var r='<a class="btn btn-primary btn-xs js-edit-user" data-id="'+i.id+'"><i data-id="'+i.id+'" class="fa fa-edit"><\/i><\/a>',u='<a class="btn btn-danger btn-xs js-delete-user" data-id="'+i.id+'"><i data-id="'+i.id+'" class="fa fa-times"><\/i><\/a>',f='<a class="btn btn-warning btn-xs js-permission-user" data-id="'+i.id+'"><i data-id="'+i.id+'" class="fa fa-lock"><\/i><\/a>',e='<a class="btn btn-primary btn-xs js-roles-user" data-id="'+i.id+'"><i data-id="'+i.id+'" class="fa fa-list"><\/i><\/a>',o='<a class="btn btn-default btn-xs js-change-password-user" data-id="'+i.id+'"><i data-id="'+i.id+'" class="fa fa-key"><\/i><\/a>';return r+" "+f+" "+o+" "+e+" "+u}}];f=$("#users-table").DataTable({data:t,columns:[{title:"",data:"id"},{title:"Full Name",data:"fullName"},{title:"Username",data:"userName"}],columnDefs:i})}).always(function(){abp.ui.clearBusy()})},s=function(n){var t=$(n.target).data("id");o(t)},h=function(t){var i=$(t.target).data("id");periModal.open("/AdminMpa/Users/SetPermissions/"+i,function(){});periModal.setOnClose(function(){abp.notify.success(n.localize("PermissionsSet"))})},c=function(t){var i=$(t.target).data("id");periModal.open("/AdminMpa/Users/SetRoles/"+i,function(){});periModal.setOnClose(function(){abp.notify.success(n.localize("RolesSet"))})},l=function(t){var i=$(t.target).data("id");periModal.open("/AdminMpa/Users/EditUser/"+i,function(){});periModal.setOnClose(function(){abp.notify.success(n.localize("UserEdited"))})},a=function(t){var i=$(t.target).data("id");periModal.open("/AdminMpa/Users/ChangePassword/"+i,function(){});periModal.setOnClose(function(){abp.notify.warn(n.localize("PasswordSet"))})};i.on("click",".js-delete-user",s);i.on("click",".js-permission-user",h);i.on("click",".js-edit-user",l);i.on("click",".js-roles-user",c);i.on("click",".js-change-password-user",a);e()})}}]),n}());n("UsersWindow",u)}}});